# Gradio интерфейс для распознавания речи

Веб-интерфейс на базе Gradio для взаимодействия с моделью Whisper, развернутой в инференс платформе. Позволяет загружать аудиофайлы, записывать аудио с микрофона или указывать URL для распознавания речи.

## Возможности

- Три способа ввода аудио:
  - Загрузка файла с диска
  - Запись с микрофона
  - Указание URL аудиофайла
- Выбор языка распознавания
- Настройка параметров модели
- Отображение метрик производительности:
  - Длительность аудио
  - Время обработки
  - RTF (Real-Time Factor)
- Поддержка различных форматов аудио через FFmpeg
- Информативный вывод результатов и статистики

## Требования

- Python 3.8+
- FFmpeg
- Зависимости из requirements.txt (основные):
  - gradio
  - numpy
  - tritonclient[http]
  - soundfile

## Установка и запуск

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Установите FFmpeg:
```bash
apt-get update && apt-get install -y ffmpeg
```

3. Запустите приложение:
```bash
python audio_gradio.py
```

4. Откройте веб-интерфейс по адресу http://localhost:7860

## Использование

### Загрузка файла
1. Перейдите на вкладку "Upload from disk"
2. Загрузите аудиофайл
3. Нажмите "Submit for recognition"

### Запись с микрофона
1. Перейдите на вкладку "Record from microphone"
2. Нажмите кнопку записи и говорите
3. Остановите запись
4. Нажмите "Submit for recognition"

### Распознавание по URL
1. Перейдите на вкладку "From URL"
2. Вставьте URL аудиофайла
3. Нажмите "Submit for recognition"

## Конфигурация

Основные настройки доступны через веб-интерфейс:

- Выбор языка распознавания
- URL Triton сервера
- Промпт для модели Whisper
- Метод декодирования

## Структура проекта

```
gradio/
├── audio_gradio.py    # Основной код приложения
├── requirements.txt   # Зависимости Python
└── README.md         # Документация
```

## Метрики производительности

Для каждого распознавания отображаются:
- Длительность входного аудио
- Время обработки
- RTF (отношение времени обработки к длительности аудио)

При первом запуске время обработки может быть увеличено из-за загрузки модели.

## Поддерживаемые языки

- Китайский
- Английский
- Китайский + Английский
- Корейский
- Японский
- Арабский
- Немецкий
- Французский
- Русский

## Обработка ошибок

Интерфейс включает обработку различных ошибок:
- Проблемы с форматом аудио
- Ошибки при конвертации
- Проблемы подключения к Triton серверу
- Ошибки распознавания

При возникновении ошибки пользователь получит информативное сообщение в интерфейсе. 